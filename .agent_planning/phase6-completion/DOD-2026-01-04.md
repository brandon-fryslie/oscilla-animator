# Definition of Done: Phase 6 Completion

**Generated**: 2026-01-04
**Plan**: PLAN-2026-01-04.md
**Topic**: phase6-completion

---

## Acceptance Criteria

### Sprint 1: Complete Schedule Executor

#### 1.1 executeNodeEval
- [ ] File exists: `src/editor/runtime/executor/steps/executeNodeEval.ts`
- [ ] Function reads input values from ValueStore via input slots
- [ ] Function looks up node evaluator by nodeIndex
- [ ] Function calls evaluator with gathered inputs
- [ ] Function writes outputs to ValueStore via output slots
- [ ] Unit tests exist and pass

#### 1.2 executeRenderAssemble
- [ ] File exists: `src/editor/runtime/executor/steps/executeRenderAssemble.ts`
- [ ] Function reads materialized field buffers from slots
- [ ] Function assembles RenderTree from buffers
- [ ] Function integrates with render pipeline
- [ ] Unit tests exist and pass

#### 1.3 Frame Loop Integration
- [ ] Frame execution loop dispatches to executeNodeEval
- [ ] Frame execution loop dispatches to executeRenderAssemble
- [ ] All step kinds handled (timeDerive, nodeEval, busEval, materialize, renderAssemble)
- [ ] Golden patch schedule executes without errors

### Sprint 2: Remove Legacy Runtime

#### 2.1 Identify and Remove Closure Evaluation
- [ ] No closure-based artifact evaluation code in runtime
- [ ] No direct closure execution in render loop
- [ ] No dual-emit code paths in compiler

#### 2.2 Compiler Updates
- [ ] Compiler emits IR only (no closure artifacts)
- [ ] `emitClosures` option removed or always false
- [ ] CompileResult contains only IR structures

#### 2.3 File Cleanup
- [ ] Deleted backup files (*.backup, *.orig)
- [ ] Deleted deprecated evaluator files
- [ ] Removed unused closure-related exports

#### 2.4 Import/Export Cleanup
- [ ] All imports resolve correctly
- [ ] No dangling exports of deleted code
- [ ] Index files updated

---

## Overall Success Criteria

### Compilation
- [ ] `pnpm typecheck` passes (0 TypeScript errors)
- [ ] `pnpm build` succeeds

### Testing
- [ ] `pnpm test run` - results documented
- [ ] Tests that depended on closure internals are updated or removed
- [ ] No NEW test failures from IR implementation (pre-existing failures acceptable)

### Runtime Verification
- [ ] Golden patch compiles successfully
- [ ] Golden patch executes with IR-only runtime
- [ ] Visual output renders correctly

### Code Quality
- [ ] No closure evaluation code remains in runtime
- [ ] Compiler is IR-only
- [ ] No backup/deprecated files remain

---

## Deferred Work (NOT in scope)

- hot-swap-semantics - deferred per user
- determinism-enforcement - deferred per user

---

**End of Definition of Done**
