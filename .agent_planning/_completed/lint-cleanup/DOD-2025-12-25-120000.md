# Definition of Done: Lint Warning Cleanup Sprint 1
Generated: 2025-12-25-120000
Plan: PLAN-2025-12-25-120000.md
Source: STATUS-2025-12-25.md

## Acceptance Criteria

### Deliverable 1: Auto-Fix Mechanical Issues

- [ ] Run `pnpm exec eslint . --fix` successfully
- [ ] Verify error count reduced from 252 to ~175 by running `pnpm exec eslint .`
- [ ] Run `just test` - all tests must pass
- [ ] Run `just typecheck` - no new TypeScript errors introduced
- [ ] Commit changes with message: "chore: apply auto-fixable ESLint fixes (type assertions, readonly)"
- [ ] Verify `git diff` shows only the expected changes (type assertions removed, readonly added)

### Deliverable 2: ESLint Configuration Policy Decision

- [ ] Review top 10 files with most `functional/immutable-data` violations (listed in STATUS)
- [ ] Make policy decision: disable entirely, exclude directories, or keep as-is
- [ ] Update `eslint.config.js` with chosen approach and clear comment explaining rationale
- [ ] Run `pnpm exec eslint .` - if disabled/excluded, warning count should drop from ~721 to <50
- [ ] Document decision in `eslint.config.js` comment referencing MobX/compiler architecture
- [ ] Run `just check` to verify no unintended side effects
- [ ] Commit changes with message: "config: resolve functional/immutable-data rule policy"

### Deliverable 3: Fix TransactionBuilder.ts Type Safety

- [ ] Read `kernel/TransactionBuilder.ts` and document each `any` usage category
- [ ] Replace `any` with proper types (target: eliminate at least 20 of 29 errors)
- [ ] Add type guards where dynamic typing is unavoidable
- [ ] Run `just typecheck` - no new errors
- [ ] Run `just test` - all tests pass, especially `kernel/__tests__/` tests
- [ ] Run `pnpm exec eslint kernel/TransactionBuilder.ts` - verify error count reduced
- [ ] Add inline comments for any remaining `any` usage explaining necessity
- [ ] Commit with message: "fix: improve type safety in TransactionBuilder (kernel)"

### Documentation: Update Lint Cleanup Progress

- [ ] Run `pnpm exec eslint . --format json > lint-report.json` to capture final state
- [ ] Update `.agent_planning/lint-cleanup/STATUS-2025-12-25.md` with "Sprint 1 Completion" section
- [ ] Document remaining work (strict-boolean-expressions, other type safety issues)
- [ ] Add note in `eslint.config.js` header linking to this plan for context
- [ ] Commit with message: "docs: update lint cleanup progress after sprint 1"

---

## Sprint Scope

**This sprint delivers**:
1. Auto-fix of 77 mechanical errors (type assertions, readonly)
2. ESLint policy resolution for 695 immutability warnings
3. Type safety fixes in TransactionBuilder.ts (29 errors → <10 errors)

**Deferred to future sprints**:
- 107 `strict-boolean-expressions` errors requiring manual null checks
- Remaining type safety errors in other files (~16 errors)
- React Hooks exhaustive-deps warnings (5 warnings)
- Pre-commit hook setup

**Success Metric**: Reduce total issues from 973 → ~250 (74% reduction)

---

## Verification Commands

Run these in sequence to verify completion:

```bash
# 1. Check lint status
pnpm exec eslint .

# 2. Verify tests pass
just test

# 3. Verify type safety
just typecheck

# 4. Full check
just check

# 5. Capture final metrics
pnpm exec eslint . --format json > .agent_planning/lint-cleanup/lint-report-final.json
```

**Expected final state**:
- Errors: ~175 (down from 252)
- Warnings: <50 (down from 721)
- All tests: PASS
- TypeScript: No compilation errors
