# Definition of Done: Modulation Table Responsive Layout
Generated: 2025-12-24-111538
Plan: PLAN-2025-12-24-111538.md
Source: STATUS-responsive-20251224-155100.md

---

## Acceptance Criteria

### Deliverable 1: Table Fills Container
- [ ] `.modulation-table` has `width: 100%` declaration in CSS
- [ ] Table width measured in DevTools equals section width (within 1px)
- [ ] No horizontal gap between table edge and section border
- [ ] Works at 50/50 split (both tables fill ~559px containers)
- [ ] Works after dragging resizer to 70/30 split (tables fill new widths)
- [ ] Works when section collapsed (remaining section fills full width)

### Deliverable 2: Responsive Corner Cell (Row Header Column)
- [ ] `.mod-table-corner` uses percentage width (20%)
- [ ] Has `min-width: 80px` to prevent collapse
- [ ] Has `max-width: 150px` to prevent excessive expansion
- [ ] At 559px container: corner cell measures ~112px (20% of 559px)
- [ ] At 1125px container: corner cell measures 150px (max-width cap)
- [ ] At 400px mobile: corner cell measures 100px (25% per media query)
- [ ] Sticky positioning still works (stays left when scrolling horizontally)

### Deliverable 3: Auto-Distributed Compact Columns
- [ ] `.mod-table-col-header.compact` has `min-width: 32px` (not `width`)
- [ ] No explicit `width` declaration on compact columns
- [ ] With 6 columns at 559px container: each column ~75px
- [ ] With 10 columns at 559px container: each column ~45px
- [ ] With 20 columns at 559px container: horizontal scroll appears
- [ ] Columns stay aligned across all rows (table-layout: fixed)
- [ ] All columns reach edge of container (no empty space on right)

### Deliverable 4: Responsive Expanded Columns
- [ ] `.mod-table-col-header.expanded` uses percentage width (2.5%)
- [ ] Has `min-width: 70px` to prevent collapse
- [ ] Expanded column visibly wider than compact columns
- [ ] Click column header to expand → column grows smoothly
- [ ] Click expanded header again → column shrinks to compact
- [ ] Table still fills container width after column expansion
- [ ] Other columns shrink proportionally to make room for expanded column

### Deliverable 5: Mobile Responsiveness
- [ ] Media query `@media (max-width: 768px)` updated with percentage widths
- [ ] Mobile corner cell: `width: 25%; min-width: 60px;`
- [ ] Mobile compact columns: `min-width: 24px;`
- [ ] Test at 375px viewport width: table fills entire width
- [ ] Test at 375px with 6 columns: columns readable (~47px each)
- [ ] Test at 375px with 10+ columns: horizontal scroll appears

---

## Chrome DevTools Verification Tests

### Test 1: Table Fills Container (50% Split)
**Setup:** Load app, switch to Table view
**Measure:** `.modulation-table` width in DevTools Elements panel
**Visual:** No horizontal gap between table and section border

### Test 2: Drag Resizer
**Setup:** Default 50/50 split
**Action:** Drag center resizer to ~70/30 split
**Measure:** Left table width, right table width
**Pass Criteria:**
- Left table width === left section width (~780px)
- Right table width === right section width (~340px)
**Visual:** Both tables fill their containers edge-to-edge

### Test 3: Add Columns (More Buses)
**Setup:** Default 6 columns
**Action:** Add 4 custom buses via Bus Board (total 10 columns)
**Measure:** Column widths in DevTools
**Pass Criteria:**
- Each column ~45px wide
- Table width === container width (559px)
- No horizontal scroll bar
**Visual:** Columns narrower but readable, table fills width

### Test 4: Many Columns (Overflow)
**Setup:** Default 6 columns
**Action:** Add 20 custom buses (total 26 columns)
**Measure:** `.section-table-scroll` overflow state
**Pass Criteria:**
- Horizontal scrollbar appears
- Can scroll to see all 26 columns
- Table width > container width
**Visual:** Smooth horizontal scrolling, all columns accessible

### Test 5: Collapse Section
**Setup:** Default 50/50 split
**Pass Criteria:**
**Visual:** Table expands to fill full container, no empty space

### Test 6: Expand Column
**Setup:** Default compact columns
**Action:** Click "phaseA" column header to expand
**Measure:** Expanded column width, other column widths
**Pass Criteria:**
- Expanded column ~100px (wider than compact ~75px)
- Other columns narrower (~70px each)
- Total table width === container width (559px)
**Visual:** Expanded column shows more padding, table still fills width

### Test 7: Mobile Viewport
**Setup:** Resize browser viewport to 375px width
**Measure:** Table width, corner width, column widths
**Pass Criteria:**
- Table width === 375px
- Corner cell ~94px (25% of 375px)
- 6 compact columns ~47px each
- Text readable without excessive wrapping
**Visual:** Table fills mobile viewport, columns usable

---

## Sprint Scope

**This sprint delivers:**
1. Table fills container at all widths (responsive)
2. Works with resizable panels (drag center resizer)
3. Handles varying column counts (6-26+ columns with auto-distribution)

**Deferred:**
- Unit tests (visual DevTools testing sufficient per user requirement)
- Additional media queries (only 768px breakpoint needed)
- Grid/Flexbox rewrite (CSS fix is sufficient, lower risk)

---

## Verification Checklist

### Pre-Commit
- [ ] All 7 DevTools tests pass
- [ ] `just typecheck` passes (no TypeScript errors)
- [ ] `just lint` passes (no ESLint errors)
- [ ] Visual inspection: sticky headers still work
- [ ] Visual inspection: tooltips still appear correctly
- [ ] Visual inspection: cell hover states still work

### Post-Commit
- [ ] Changes isolated to `ModulationTable.css` (no React/TS changes)
- [ ] Git diff shows only 6 line changes (4 rules + 2 media query updates)
- [ ] Commit message references responsive layout fix
- [ ] No regressions in other table features (expand/collapse, publish/listen)

---

## Success Criteria Summary

**Primary Goal:** Table fills container at all widths
**Verification Method:** Chrome DevTools measurements
**Pass Threshold:** Table width === container width (±1px)

**Secondary Goals:**
- Works with 6-26+ columns (auto-distribution + scroll)
- Works with resizable panels (drag resizer)
- Works on mobile (375px viewport)

**All criteria must pass for sprint completion.**
