# Definition of Done: Time Authority Unification

## Summary
Unify time authority so Player provides monotonic time and TimeRoot is the sole owner of time topology (wrapping, phase derivation, looping).

## Acceptance Criteria

### 1. Player Time is Monotonic
- [x] Player.tick() NEVER wraps tMs for cyclic mode
- [x] tMs advances unbounded during playback (cyclic/infinite)
- [x] tMs only clamps to >= 0 (no upper bound enforcement)
- [x] Legacy loopMode time wrapping removed for cyclic mode

### 2. TimeRoot is Time Authority

- [x] FiniteTimeRoot clamps progress at 1.0 (already done)
- [x] InfiniteTimeRoot passes through time (already done)

### 3. UI Shows View Window, Not Bounded Time
- [x] For cyclic mode: maxTime represents the period (UI framing) but doesn't affect tMs wrapping
- [x] For finite mode: player pauses at maxTime when finiteLoopMode=false (unchanged)
- [x] For infinite mode: maxTime is preview window only (unchanged)
- [x] Scrubbing works correctly (sets tMs directly)

### 4. Backward Compatibility
- [x] Existing patches continue to work
- [x] LoopMode property deprecated but doesn't break anything
- [x] TimeModel is respected when set

### 5. Tests Pass
- [x] All existing tests pass (738 passed)
- [x] No regressions in animation behavior

## Out of Scope
- PhaseIndicator ring visualization (already functional)
- Auto-publish phase to phaseA bus (separate work)
- Removing LoopMode entirely (deprecation is sufficient)

## Key Files
- `src/editor/runtime/player.ts` - Main change: remove time wrapping in tick()
- `src/editor/compiler/blocks/domain/TimeRoot.ts` - Already correct
- `src/editor/components/TimeConsole.tsx` - May need minor UI adjustments

## Completion Status

**COMPLETE** - Commit 1857bb8

Changes implemented:
- Cyclic mode: Removed `this.tMs = this.tMs % this.maxTime` wrapping
- Time now advances monotonically for cyclic/infinite modes
- Only clamped to non-negative (>= 0)
- Finite mode preserves existing pause/loop behavior
- All 738 tests passing
