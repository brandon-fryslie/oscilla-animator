# Definition of Done: IR and Schedule Visualizer

## Acceptance Criteria

### 1. IR Tab in Debug Drawer
- [ ] New "IR" tab appears in DebugDrawer alongside Overview and Buses
- [ ] Shows IR summary header (irVersion, patchId, seed)
- [ ] Collapsible "Nodes" section listing all nodes with type and ID
- [ ] Collapsible "Buses" section listing all buses
- [ ] Collapsible "Time Model" section showing kind and parameters
- [ ] Graceful handling when no IR available (shows placeholder)
- [ ] Clicking a node shows its details (inputs, outputs, params)

### 2. Schedule Tab in Debug Drawer
- [ ] New "Schedule" tab appears in DebugDrawer
- [ ] Shows schedule summary header (step count, time model kind)
- [ ] Lists all steps with:
  - Step index
  - Step kind (color-coded pill/badge)
  - Key information (node ref, slot, bus, etc.)
- [ ] Clicking a step expands to show full step details
- [ ] Steps with dependencies show the dependency chain
- [ ] Graceful handling when no schedule available

### 3. REPL Commands
- [ ] `ir` command shows IR summary (irVersion, nodeCount, busCount, timeModel)
- [ ] `ir nodes` lists all nodes with ID and type
- [ ] `ir buses` lists all buses with ID and name
- [ ] `ir node <id>` shows detailed info for specific node
- [ ] `schedule` shows schedule overview (step count, step kinds breakdown)
- [ ] `schedule step <index>` shows detailed info for specific step
- [ ] All commands handle missing IR/schedule gracefully with clear message

### 4. Integration
- [ ] Tab types added to DebugUIStore (`'overview' | 'buses' | 'ir' | 'schedule'`)
- [ ] New components exported from `debug-ui/index.ts`
- [ ] Compile result accessed via `window.__compilerService.getLatestResult()`
- [ ] Components re-render when compile result changes

### 5. Styling
- [ ] IR and Schedule tabs match existing DebugDrawer styling
- [ ] Step kind badges have distinct colors per type
- [ ] Collapsible sections have expand/collapse indicators
- [ ] Text is readable (monospace where appropriate for IDs/values)

## How to Test

1. **IR Tab**: Open Debug Drawer, click IR tab. Create a patch with multiple blocks. Verify nodes appear in list.
2. **Schedule Tab**: Same patch. Click Schedule tab. Verify steps appear with correct kinds.
3. **REPL**: Open Debug Drawer, use console. Type `ir` - verify summary. Type `schedule step 0` - verify details.
4. **Empty state**: Clear patch. Verify IR and Schedule tabs show "No IR available" message.
5. **Hot reload**: Edit patch while drawer is open. Verify visualization updates.

## Out of Scope

- Visual dependency graph with SVG lines (future enhancement)
- IR diffing between compiles
- Export/save IR to file
- Step-through debugging / breakpoints
