# Definition of Done: Field Runtime Red Flags - Sprint 1

**Generated:** 2025-12-28 (revised v2)
**Plan:** `PLAN-2025-12-28.md`

---

## Sprint Acceptance Criteria

### P0: Hard Error on Signal Fallback

**Must Pass:**
- [ ] `evalSig()` throws Error when no evaluation context available
- [ ] Error message includes signal ID
- [ ] Error message explains how to fix (compiler must wire signals)
- [ ] `just check` passes

---

### P1: Legacy Params Code Removed

**Must Pass:**
- [ ] `readParamNumber()` function deleted from Materializer.ts
- [ ] `params` property removed from FieldHandle type (Op, Zip variants)
- [ ] `params` property removed from FnRef type
- [ ] `params` property removed from FieldExprMap/FieldExprZip
- [ ] All code using `handle.params` updated or removed
- [ ] `just check` passes

---

### P2: Compiler Handles Default Sources for Field Ops

**Must Pass:**
- [ ] JitterFieldVec2 block works with default sources (amount, phase, frequency inputs)
- [ ] Vec2Rotate works with default sources (angle, centerX, centerY inputs)
- [ ] Vec2Scale works with default sources (scaleX, scaleY, centerX, centerY inputs)
- [ ] Compiler emits proper field IR with inputs wired
- [ ] Runtime receives input values through field expressions, not params
- [ ] `just check` passes

---

### P3: Audit Document Updated

**Must Pass:**
- [ ] "Input slots not implemented" marked RESOLVED
- [ ] Params REMOVED (not deprecated) documented
- [ ] Each item has accurate current status
- [ ] Default source architecture documented

---

## Overall Sprint Criteria

**The sprint is complete when ALL of these are true:**

1. `just check` passes
2. No silent failures (all failures throw with actionable errors)
3. No `params` code remains in runtime
4. Parameterized field ops work via default sources
5. Audit document reflects reality

---

## Sign-Off

| Criterion | Status | Evidence |
|-----------|--------|----------|
| P0: Hard error | ⬜ | Error thrown, not silent 0 |
| P1: Params removed | ⬜ | No params in types/code |
| P2: Default sources work | ⬜ | JitterFieldVec2 test passes |
| P3: Audit updated | ⬜ | Document reviewed |
| Full test suite | ⬜ | `just check` output |
